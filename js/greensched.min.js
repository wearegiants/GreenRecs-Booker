jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh")),a("#cal_submit").on("click",function(b){b.preventDefault(),$nonce=a("#schedule_nonce").val(),$eventsList=d.weekCalendar("serializeEvents"),console.log($nonce)})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh")),a("#cal_submit").on("click",function(b){b.preventDefault(),$nonce=a("#schedule_nonce").val(),console.log(d.weekCalendar("serializeEvents"),$nonce)})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh")),a("#cal_submit").on("click",function(b){b.preventDefault(),$nonce=a("schedule_nonce").val(),console.log(d.weekCalendar("serializeEvents"),$nonce)})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh")),a("#cal_submit").on("click",function(b){b.preventDefault(),$nonce=a("schedule_nonce").val(),console.log($totalEvents)})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh")),a("#cal_submit").on("click",function(a){a.preventDefault()})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0])},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&console.log($totalEvents[0].id)},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),$totalEvents=d.weekCalendar("serializeEvents"),$totalEvents.length>1&&($totalEvents.pop(),console.log($totalEvents)),console.log()},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),console.log(d.weekCalendar("serializeEvents"))},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),d.weekCalendar("serializeEvents")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick),d.weekCalendar("serializeEvents")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(){console.log("ok","lets do a bubble zoom for this")},beforeEventNew:function(a,b){console.log(a),console.log(b.createdFromSingleClick)},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")
},eventClick:function(){console.log("ok","lets do a bubble zoom for this")},beforeeventnew:function(a,b){console.log(a),console.log(b.createdFromSingleClick)},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(){console.log("ok","lets do a bubble zoom for this")},beforeeventnew:function(a,b){console.log(a),console.log(b.createdFromSingleClick)},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.title="Your GreenRecs Consultation Appointment",a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(){console.log("ok","lets do a bubble zoom for this")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"Your GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(){console.log("ok","lets do a bubble zoom for this")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1,title:"GreenRecs Consultation Appointment"})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventClick:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventMouseover:function(a,b){console.log(a,b),console.log("ok","lets do a bubble zoom for this")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=767&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),$modal.css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),$modal.css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),$modal.css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),a("#scheduleModal").css({width:"100%"}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(d.weekCalendar({daysToShow:1}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()
},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors},d=a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0});window.outerWidth<=480&&(a.calendar.weekCalendar({daysToShow:1}),d.weekCalendar("refresh"))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0}),console.log(window.outerWidth)}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0}),console.log(window.outerHeight)}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0}),console.log(window.outerHeight())}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0}),console.log(window.outerHeight(!0))}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 480},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return a("#calendar").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return a("#calendar").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return a("#calendar").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return a("#calendar").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return a("#calendar").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 400-a("#calendar h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 400-a("#calendar h1").outerHeight()},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 400-a("#calendar h1").outerHeight()},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,showHeader:!1,height:function(){return 400},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})
}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,showHeader:!1,height:function(){return 400},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 400},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:600,height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:"600px",height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(){c.css({width:"auto",height:"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").click(function(a){a.preventDefault(),c.open()}),a("#closeModal").click(function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").on(["click","focus"],function(a){a.preventDefault(),c.open()}),a("#closeModal").on("click",function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a("#calendar_active").on("click",function(a){a.preventDefault(),c.open()}),a("#closeModal").on("click",function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a(".open_cal").on("click",function(a){a.preventDefault(),c.open()}),a("#closeModal").on("click",function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a(".open_cal").on("click",function(a){a.preventDefault(),c.open()}),a("#closeModal").on("click",function(a){a.preventDefault,c.close()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery);var c=function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}();c.close(),a(".open_cal").on("click",function(){c.open()})}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery),!function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){var b,d;b=Math.max(a(window).height()-c.outerHeight(),0)/2,d=Math.max(a(window).width()-c.outerWidth(),0)/2,c.css({top:b+a(window).scrollTop(),left:d+a(window).scrollLeft()})},e.open=function(d){c.css({width:d.width||"auto",height:d.height||"auto"}),e.center(),a(window).bind("resize.modal",e.center),c.show(),b.show()},e.close=function(){c.hide(),b.hide(),a(window).unbind("resize.modal")},e}()}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery),!function(){var b,c,d,e={};return c=a("#scheduleModal"),b=a("#overlayBg"),d=a("#closeModal"),e.center=function(){},e.open=function(){},e.close=function(){},e}()}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!0,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})
}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:8,end:20,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:60},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 750},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},resizable:function(){return!1},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,defaultEventLength:1,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return b.end=new Date(b.start.getTime()+18e5),console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return b.end=new Date(b.start.getTime()+18e5),console.log(b),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return b.end=new Date(b.start.getTime()+18e5),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return b.end=b.start.getTime()-30,a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b,c),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(b),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor."),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),alert("<p>We're sorry but GreenRecs does not currently have an availible time slot with this doctor, please choose another time or another doctor.</p>"),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:3,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:40},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!0},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusys:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return console.log(d),a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 800-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)
},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),!function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));
r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),!function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";
e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)
}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))
})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))
}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();
this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");
if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();
return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());
var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]
},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))
})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];
return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){var c=new Date;c.setDate(c.getDate()-c.getDay()),c.getFullYear(),c.getMonth(),c.getDate(),a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);
if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek
},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){var c=new Date;c.setDate(c.getDate()-c.getDay()),c.getFullYear(),c.getMonth(),c.getDate(),a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;
if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);
i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){var c=new Date;c.setDate(c.getDate()-c.getDay());var d=c.getFullYear(),e=c.getMonth(),f=c.getDate();console.log(c),console.log(new Date(d,e,f,12)),a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(-1*b)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase(),g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){for(var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){for(var b=c.timezones,d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),2>=f?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)
},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var e=c.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return d(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var e,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),g="january february march april may june july august september october november december".split(/\s/),h="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),i="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),j="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<h.length;b++)a[h[b].toLowerCase()]=this["get"+i[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return 0===b&&1===c.firstDayOfWeek&&0!==d.getDay()&&(e+=7),d.addDays(e)}},m=0;m<f.length;m++)a[f[m].toUpperCase()]=a[f[m].toUpperCase().substring(0,3)]=m,a[f[m]]=a[f[m].substring(0,3)]=l(m),b[f[m]]=b[f[m].substring(0,3)]=k(m);for(var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}},p=0;p<g.length;p++)a[g[p].toUpperCase()]=a[g[p].toUpperCase().substring(0,3)]=p,a[g[p]]=a[g[p].substring(0,3)]=o(p),b[g[p]]=b[g[p].substring(0,3)]=n(p);for(var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=h.length-1;f>-1;f--){if(d=h[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}},s=0;s<h.length;s++)e=h[s].toLowerCase(),b[e]=b[e+"s"]=q(h[s]),d[e]=d[e+"s"]=r(e);b._ss=q("Second");for(var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},u=0;u<j.length;u++)b[j[u]]=t(0===u?-1:u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo),c=function(a){for(var b=[],d=0;d<a.length;d++)a[d]instanceof Array?b=b.concat(c(a[d])):a[d]&&b.push(a[d]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2e3<b.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){if(b=b instanceof Array?c(b):[b],0===b.length)return null;for(var d=0;d<b.length;d++)"function"==typeof b[d]&&b[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)):Date.today().setWeek(this.value)}};var d,e=a.Parsing.Operators,f=a.Grammar,g=a.Translator;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};f.ctoken=function(a){var c=h[a];if(!c){for(var d=b.regexPatterns,f=a.split(/\s+/),g=[],i=0;i<f.length;i++)g.push(e.replace(e.rtoken(d[f[i]]),f[i]));c=h[a]=e.any.apply(null,g)}return c},f.ctoken2=function(a){return e.rtoken(b.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),d=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=d(f.d,f.dd),f.month=d(f.M,f.MMM),f.year=d(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),d=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=d(f.ddd,f.month,f.day,f.year),f.ymd=d(f.ddd,f.year,f.month,f.day),f.dmy=d(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[b.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var i={},j=function(a){return i[a]=i[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(j(a[c]));return e.any.apply(null,b)}return j(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(0===b[1].length)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),function(a){var b=a.fn.jquery.split("."),c=10*b[0]+b[1]<15;a.widget("ui.weekCalendar",function(){var b,f;return{options:{date:new Date,timeFormat:null,dateFormat:"M d, Y",alwaysDisplayTimeMinutes:!0,use24Hour:!1,daysToShow:7,minBodyHeight:100,firstDayOfWeek:function(b){return 5!=a(b).weekCalendar("option","daysToShow")?0:1},useShortDayNames:!1,timeSeparator:" to ",startParam:"start",endParam:"end",businessHours:{start:8,end:18,limitDisplay:!1},newEventText:"New Event",timeslotHeight:20,defaultEventLength:2,timeslotsPerHour:4,minDate:null,maxDate:null,showHeader:!0,buttons:!0,buttonText:{today:"today",lastWeek:"previous",nextWeek:"next"},switchDisplay:{},scrollToHourMillis:500,allowEventDelete:!1,allowCalEventOverlap:!1,overlapEventsSeparate:!1,totalEventsWidthPercentInOneColumn:100,readonly:!1,allowEventCreation:!0,hourLine:!1,deletable:function(){return!0},draggable:function(){return!0},resizable:function(){return!0},eventClick:function(){},eventRender:function(a,b){return b},eventAfterRender:function(a,b){return b},eventRefresh:function(a,b){return b},eventDrag:function(){},eventDrop:function(){},eventResize:function(){},eventNew:function(){},eventMouseover:function(){},eventMouseout:function(){},eventDelete:function(a,b,c,d){d.weekCalendar("removeEvent",a.id)},calendarBeforeLoad:function(){},calendarAfterLoad:function(){},noEvents:function(){},eventHeader:function(a,b){var c=b.weekCalendar("option"),d=36e5,e=a.end.getTime()-a.start.getTime()<=d/c.timeslotsPerHour;return e?b.weekCalendar("formatTime",a.start)+": "+a.title:b.weekCalendar("formatTime",a.start)+c.timeSeparator+b.weekCalendar("formatTime",a.end)},eventBody:function(a){return a.title},shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],users:[],showAsSeparateUsers:!0,getUserId:function(a,b){return b},getUserName:function(a){return a},getEventUserId:function(a){return a.userId},setEventUserId:function(a,b){return b.userId=a,b},displayFreeBusys:!1,getFreeBusyUserId:function(a){return a.userId},defaultFreeBusy:{free:!1},freeBusyRender:function(a,b){return b.addClass(a.free?"free-busy-free":"free-busy-busy"),b},startOnFirstDayOfWeek:function(b){return a(b).weekCalendar("option","daysToShow")>=5},displayOddEven:!1,textSize:13,title:"%start% - %end%",jsonOptions:{},headerSeparator:"<br />",getHeaderDate:null,preventDragOnEventCreation:!1,resizeEvent:"resize.weekcalendar"},_create:function(){var b=this;b._computeOptions(),b._setupEventDelegation(),b._renderCalendar(),b._loadCalEvents(),b._resizeCalendar(),b._scrollToHour(b.options.date.getHours(),!0),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){b._resizeCalendar()}))},refresh:function(){this._loadCalEvents(this.element.data("startDate"))},clear:function(){this._clearCalendar()},today:function(){this._clearCalendar(),this._loadCalEvents(new Date)},prevWeek:function(){var a=new Date(this.element.data("startDate").getTime()-e/6);this._clearCalendar(),this._loadCalEvents(a)},nextWeek:function(){var a=new Date(this.element.data("startDate").getTime()+e+d);this._clearCalendar(),this._loadCalEvents(a)},gotoWeek:function(a){this._clearCalendar(),this._loadCalEvents(a)},gotoDate:function(a){this._clearCalendar(),this._loadCalEvents(a)},setDaysToShow:function(b){var c=this,d=c._getCurrentScrollHour();c.options.daysToShow=b,a(c.element).html(""),c._renderCalendar(),c._loadCalEvents(),c._resizeCalendar(),c._scrollToHour(d,!1),this.options.resizeEvent&&(a(window).unbind(this.options.resizeEvent),a(window).bind(this.options.resizeEvent,function(){c._resizeCalendar()}))},removeEvent:function(b){var c=this;c.element.find(".wc-cal-event").each(function(){return a(this).data("calEvent").id===b?(a(this).remove(),!1):void 0}),c.element.find(".wc-day-column-inner").each(function(){c._adjustOverlappingEvents(a(this))})},removeUnsavedEvents:function(){var b=this;b.element.find(".wc-new-cal-event").each(function(){a(this).remove()}),b.element.find(".wc-day-column-inner").each(function(){b._adjustOverlappingEvents(a(this))})},updateEvent:function(a){this._updateEventInCalendar(a)},getTimeslotTimes:function(a){for(var b=this.options,c=b.businessHours.limitDisplay?b.businessHours.start:0,d=new Date(a.getFullYear(),a.getMonth(),a.getDate(),c),e=[],f=d.getTime(),g=0;g<b.timeslotsPerDay;g++){var h=f+b.millisPerTimeslot;e[g]={start:new Date(f),startFormatted:this.formatTime(new Date(f),b.timeFormat),end:new Date(h),endFormatted:this.formatTime(new Date(h),b.timeFormat)},f=h}return e},formatDate:function(a,b){return b?this._formatDate(a,b):this._formatDate(a,this.options.dateFormat)},formatTime:function(a,b){return b?this._formatDate(a,b):this.options.timeFormat?this._formatDate(a,this.options.timeFormat):this.options.use24Hour?this._formatDate(a,"H:i"):this._formatDate(a,"h:i a")},serializeEvents:function(){var b=this,c=[];return b.element.find(".wc-cal-event").each(function(){c.push(a(this).data("calEvent"))}),c},next:function(){if(this._startOnFirstDayOfWeek())return this.nextWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()+this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},prev:function(){if(this._startOnFirstDayOfWeek())return this.prevWeek();var a=new Date(this.element.data("startDate").getTime());a.setDate(a.getDate()-this.options.daysToShow),this._clearCalendar(),this._loadCalEvents(a)},getCurrentFirstDay:function(){return this._dateFirstDayOfWeek(this.options.date||new Date)},getCurrentLastDay:function(){return this._addDays(this.getCurrentFirstDay(),this.options.daysToShow-1)},_setOption:function(b,c){var d=this;if(d.options[b]!=c){if("beforeEventNew"==b)return void(d.options[b]=c);var e=d.element.find(".wc-cal-event").map(function(){return a(this).data("calEvent")}),f={};f[b]=c,d._renderEvents({events:e,options:f},d.element.find(".wc-day-column-inner"))}},_computeOptions:function(){var a=this.options;a.businessHours.limitDisplay?(a.timeslotsPerDay=a.timeslotsPerHour*(a.businessHours.end-a.businessHours.start),a.millisToDisplay=36e5*(a.businessHours.end-a.businessHours.start),a.millisPerTimeslot=a.millisToDisplay/a.timeslotsPerDay):(a.timeslotsPerDay=24*a.timeslotsPerHour,a.millisToDisplay=d,a.millisPerTimeslot=d/a.timeslotsPerDay)},_resizeCalendar:function(){var b=this.options;if(b&&a.isFunction(b.height)){var c=b.height(this.element),d=this.element.find(".wc-header").outerHeight(),e=this.element.find(".wc-toolbar").outerHeight(),f=Math.max(c-e-d,b.minBodyHeight),g=this.element.find(".wc-time-slots").outerHeight();this.element.find(".wc-scrollable-grid").height(f),this.element.find(".wc-scrollbar-shim").width(f>=g?0:this._findScrollBarWidth()),this._trigger("resize",this.element)}},_findScrollBarWidth:function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),c=b.children(),d=c.innerWidth()-c.height(99).innerWidth();return b.remove(),d||16},_setupEventDelegation:function(){var b=this,c=this.options;this.element.click(function(d){var e,f=a(d.target);if(!f.data("preventClick")){var g=f.hasClass("wc-cal-event")?f:f.parents(".wc-cal-event");g.length&&g.data("calEvent")&&(e=b.getFreeBusyManagerForEvent(g.data("calEvent")),c.allowEventDelete&&f.hasClass("wc-cal-event-delete")?c.eventDelete(g.data("calEvent"),g,e,b.element,d):c.eventClick(g.data("calEvent"),g,e,b.element,d))}}).mouseover(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseover(f.data("calEvent"),f,d))}).mouseout(function(d){var e=a(d.target),f=e.hasClass("wc-cal-event")?e:e.parents(".wc-cal-event");f.length&&f.data("calEvent")&&(b._isDraggingOrResizing(f)||c.eventMouseout(f.data("calEvent"),f,d))})},_isDraggingOrResizing:function(a){return a.hasClass("ui-draggable-dragging")||a.hasClass("ui-resizable-resizing")},_renderCalendar:function(){var b,c,d=this,e=this.options;b=a('<div class="ui-widget wc-container">').appendTo(d.element),d._renderCalendarButtons(b),d._renderCalendarHeader(b),d._renderCalendarBody(b),c=b.find(".wc-day-column-inner"),c.each(function(){e.readonly||(d._addDroppableToWeekDay(a(this)),e.allowEventCreation&&d._setupEventCreationForWeekDay(a(this)))})},_renderCalendarButtons:function(b){var c=this,d=this.options;if(d.showHeader)if(d.buttons){var e="";if(e+='<div class="ui-widget-header wc-toolbar">',e+='<div class="wc-display"></div>',e+='<div class="wc-nav">',e+='<button class="wc-prev">'+d.buttonText.lastWeek+"</button>",e+='<button class="wc-today">'+d.buttonText.today+"</button>",e+='<button class="wc-next">'+d.buttonText.nextWeek+"</button>",e+="</div>",e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b),b.find(".wc-nav .wc-today").button({icons:{primary:"ui-icon-home"}}).click(function(){return c.today(),!1}),b.find(".wc-nav .wc-prev").button({text:!1,icons:{primary:"ui-icon-seek-prev"}}).click(function(){return c.element.weekCalendar("prev"),!1}),b.find(".wc-nav .wc-next").button({text:!1,icons:{primary:"ui-icon-seek-next"}}).click(function(){return c.element.weekCalendar("next"),!1}),this.options.switchDisplay&&a.isPlainObject(this.options.switchDisplay)){var f=b.find(".wc-display");a.each(this.options.switchDisplay,function(b,d){var e="wc-switch-display-"+d,g=a('<input type="radio" id="'+e+'" name="wc-switch-display" class="wc-switch-display"/>'),h=a('<label for="'+e+'"></label>');h.html(b),g.val(d),parseInt(c.options.daysToShow,10)===parseInt(d,10)&&g.attr("checked","checked"),f.append(g).append(h)}),f.find("input").change(function(){c.setDaysToShow(parseInt(a(this).val(),10))})}b.find(".wc-nav, .wc-display").buttonset();var g=b.find(".wc-nav").outerHeight();b.find(".wc-title").height(g).css("line-height",g+"px")}else{var e="";e+='<div class="ui-widget-header wc-toolbar">',e+='<h1 class="wc-title"></h1>',e+="</div>",a(e).appendTo(b)}},_renderCalendarHeader:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g="",h="";f&&(g=' rowspan="2"',h=' colspan="'+e.users.length+'" '),c='<div class="ui-widget-content wc-header">',c+='<table><tbody><tr><td class="wc-time-column-header"></td>';for(var i=1;i<=e.daysToShow;i++)c+='<td class="wc-day-column-header wc-day-'+i+'"'+h+"></td>";if(c+='<td class="wc-scrollbar-shim"'+g+"></td></tr>",f){c+='<tr><td class="wc-time-column-header"></td>';for(var j=e.users.length,k="",i=1;i<=e.daysToShow;i++)for(var l=0;j>l;l++)k=[],0==l&&k.push("wc-day-column-first"),l==j-1&&k.push("wc-day-column-last"),k=k.length?k.join(" "):"wc-day-column-middle",c+='<td class="'+k+" wc-user-header wc-day-"+i+" wc-user-"+d._getUserIdFromIndex(l)+'">',c+=d._getUserName(l),c+="</td>";c+="</tr>"}c+="</tbody></table></div>",a(c).appendTo(b)},_renderCalendarBody:function(b){var c,d,e=this,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length;if(c='<div class="wc-scrollable-grid">',c+='<table class="wc-time-slots">',c+="<tbody>",c+="</tbody>",c+="</table>",c+="</div>",c=a(c),d=c.find("tbody"),e._renderCalendarBodyTimeSlots(d),e._renderCalendarBodyOddEven(d),e._renderCalendarBodyFreeBusy(d),e._renderCalendarBodyEvents(d),c.appendTo(b),b.find(".wc-full-height-column").height(f.timeslotHeight*f.timeslotsPerDay),b.find(".wc-time-slot").height(f.timeslotHeight-1),b.find(".wc-time-header-cell").css({height:f.timeslotHeight*f.timeslotsPerHour-11,padding:5}),g)for(var h=0,i=f.users.length;i>h;h++)b.find(".wc-user-"+e._getUserIdFromIndex(h)).data("wcUser",f.users[h]).data("wcUserIndex",h).data("wcUserId",e._getUserIdFromIndex(h))},_renderCalendarBodyTimeSlots:function(b){var c,d,e,f=this.options,g=f.showAsSeparateUsers&&f.users&&f.users.length,h=f.businessHours.limitDisplay?f.businessHours.start:0,i=f.businessHours.limitDisplay?f.businessHours.end:24,j=1;for(f.displayOddEven&&(j+=1),f.displayFreeBusys&&(j+=1),j=j>1?' rowspan="'+j+'"':"",c='<tr class="wc-grid-row-timeslot">',c+='<td class="wc-grid-timeslot-header"'+j+"></td>",c+='<td colspan="'+f.daysToShow*(g?f.users.length:1)+'">',c+='<div class="wc-no-height-wrapper wc-time-slot-wrapper">',c+='<div class="wc-time-slots">',d=h;i>d;d++){for(e=0;e<f.timeslotsPerHour-1;e++)c+='<div class="wc-time-slot"></div>';c+='<div class="wc-time-slot wc-hour-end"></div>'}c+="</div>",c+="</div>",c+="</td>",c+="</tr>",a(c).appendTo(b)},_renderCalendarBodyOddEven:function(b){if(this.options.displayOddEven){for(var c,d=this.options,e='<tr class="wc-grid-row-oddeven">',f=d.showAsSeparateUsers&&d.users&&d.users.length,g={odd:"wc-column-odd",even:"ui-state-hover wc-column-even"},h=1;h<=d.daysToShow;h++)if(f)for(var i=d.users.length,j=0;i>j;j++)c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'" ></div>',e+="</div>",e+="</td>";
else c="odd"==c?"even":"odd",e+='<td class="wc-day-column day-'+h+'">',e+='<div class="wc-no-height-wrapper wc-oddeven-wrapper">',e+='<div class="wc-full-height-column '+g[c]+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyFreeBusy:function(b){if(this.options.displayFreeBusys){var c=this,d=this.options,e='<tr class="wc-grid-row-freebusy">',f=d.showAsSeparateUsers&&d.users&&d.users.length;e+="</td>";for(var g=1;g<=d.daysToShow;g++)if(d.displayFreeBusys)if(f)for(var h=d.users.length,i=0;h>i;i++)e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g,e+=" wc-user-"+c._getUserIdFromIndex(i)+'">',e+="</div>",e+="</div>",e+="</td>";else e+='<td class="wc-day-column day-'+g+'">',e+='<div class="wc-no-height-wrapper wc-freebusy-wrapper">',e+='<div class="wc-full-height-column wc-column-freebusy wc-day-'+g+'"></div>',e+="</div>",e+="</td>";e+="</tr>",a(e).appendTo(b)}},_renderCalendarBodyEvents:function(b){var c,d=this,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=e.businessHours.limitDisplay?e.businessHours.start:0,h=e.businessHours.limitDisplay?e.businessHours.end:24;c='<tr class="wc-grid-row-events">',c+='<td class="wc-grid-timeslot-header">';for(var i=g;h>i;i++){var j=e.businessHours.start<=i&&e.businessHours.end>i?"ui-state-active wc-business-hours":"ui-state-default";c+='<div class="wc-hour-header '+j+'">',c+=e.use24Hour?'<div class="wc-time-header-cell">'+d._24HourForIndex(i)+"</div>":'<div class="wc-time-header-cell">'+d._hourForIndex(i)+'<span class="wc-am-pm">'+d._amOrPm(i)+"</span></div>",c+="</div>"}c+="</td>";for(var k="ui-state-default wc-day-column",i=1;i<=e.daysToShow;i++)if(f)for(var l,m=e.users.length,n=0;m>n;n++)l=[],0==n&&l.push("wc-day-column-first"),n==m-1&&l.push("wc-day-column-last"),l=l.length?l.join(" "):"wc-day-column-middle",c+='<td class="'+k+" "+l+" day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i,c+=" wc-user-"+d._getUserIdFromIndex(n)+'">',c+="</div>",c+="</td>";else c+='<td class="'+k+" wc-day-column-first wc-day-column-last day-"+i+'">',c+='<div class="wc-full-height-column wc-day-column-inner day-'+i+'"></div>',c+="</td>";c+="</tr>",a(c).appendTo(b)},_setupEventCreationForWeekDay:function(b){var c=this,d=this.options;b.mousedown(function(b){var c=a(b.target);if(c.hasClass("wc-day-column-inner")){var e=a('<div class="wc-cal-event wc-new-cal-event wc-new-cal-event-creating"></div>');e.css({lineHeight:d.timeslotHeight-2+"px",fontSize:d.timeslotHeight/2+"px"}),c.append(e);var f=c.offset().top,g=b.pageY-f,h=(g-g%d.timeslotHeight)/d.timeslotHeight,i=h*d.timeslotHeight;e.css({top:i}),d.preventDragOnEventCreation||c.bind("mousemove.newevent",function(a){e.show(),e.addClass("ui-resizable-resizing");var b=Math.round(a.pageY-f-i),c=b%d.timeslotHeight;if(0>c){var g=b-c;e.css("height",g<d.timeslotHeight?d.timeslotHeight:g)}else e.css("height",b+(d.timeslotHeight-c))}).mouseup(function(){c.unbind("mousemove.newevent"),e.addClass("ui-corner-all")})}}).mouseup(function(b){var e=a(b.target),f=e.closest(".wc-day-column-inner"),g=f.find(".wc-new-cal-event-creating");if(g.length){var h=!g.hasClass("ui-resizable-resizing");h&&g.css({height:d.timeslotHeight*d.defaultEventLength}).show();var i=parseInt(g.css("top")),j=c._getEventDurationFromPositionedEventElement(f,g,i);g.remove();var k={start:j.start,end:j.end,title:d.newEventText},l=d.showAsSeparateUsers&&d.users&&d.users.length;l?k=c._setEventUserId(k,f.data("wcUserId")):!d.showAsSeparateUsers&&d.users&&1==d.users.length&&(k=c._setEventUserId(k,c._getUserIdFromIndex(0)));var m=c.getFreeBusyManagerForEvent(k),n=c._renderEvent(k,f);d.allowCalEventOverlap?c._adjustOverlappingEvents(f):(c._adjustForEventCollisions(f,n,k,k),c._positionEvent(f,n));var o=c._trigger("beforeEventNew",b,{calEvent:k,createdFromSingleClick:h,calendar:c.element});o?d.eventNew(k,n,m,c.element,b):a(n).remove()}})},_loadCalEvents:function(d){var e,f,g,h,i=this,j=this.options;if(e=this._fixMinMaxDate(d||j.date),e&&e.getTime&&j.date&&j.date.getTime&&e.getTime()==j.date.getTime()||this._trigger("changedate",this.element,e),this.options.date=e,f=i._dateFirstDayOfWeek(e),g=i._dateLastMilliOfWeek(e),j.calendarBeforeLoad(i.element),i.element.data("startDate",f),i.element.data("endDate",g),h=i.element.find(".wc-day-column-inner"),i._updateDayColumnHeader(h),"string"==typeof j.data){j.loading&&j.loading(!0),b&&(c?(b.onreadystatechange=null,b.abort(),b=null,j.loading&&j.loading(!1)):b.abort());var k=i._getJsonOptions();k[j.startParam||"start"]=Math.round(f.getTime()/1e3),k[j.endParam||"end"]=Math.round(g.getTime()/1e3),b=a.ajax({url:j.data,data:k,dataType:"json",error:function(a,b,c){"abort"!=c&&0!=a.status&&alert("unable to get data, error:"+b)},success:function(a){i._renderEvents(a,h)},complete:function(){b=null,j.loading&&j.loading(!1)}})}else a.isFunction(j.data)?j.data(f,g,function(a){i._renderEvents(a,h)}):j.data&&i._renderEvents(j.data,h);i._disableTextSelect(h)},_drawCurrentHourLine:function(){var b=new Date,c=this.options,d=c.businessHours;if(a(".wc-hourline",this.element).remove(),!(d.limitDisplay&&b.getHours()>d.end)){var e=d.limitDisplay?d.start:0,f=b.getHours()-e+b.getMinutes()/60,g=f*c.timeslotHeight*c.timeslotsPerHour,h=a(".wc-scrollable-grid .wc-today",this.element).width()+3;a(".wc-scrollable-grid .wc-today",this.element).append(a("<div>",{"class":"wc-hourline",style:"top: "+g+"px; width: "+h+"px"}))}},_updateDayColumnHeader:function(b){var c=this,e=this.options,f=c._cloneDate(c.element.data("startDate")),g=e.showAsSeparateUsers&&e.users&&e.users.length,h="ui-state-active wc-today";if(c.element.find(".wc-header td.wc-day-column-header").each(function(){a(this).html(c._getHeaderDate(f)),c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),g&&c.element.find(".wc-header td.wc-user-header").each(function(b){c._isToday(f)?a(this).addClass(h):a(this).removeClass(h),f=(b+1)%e.users.length?f:c._addDays(f,1)}),f=c._cloneDate(c.element.data("startDate")),b.each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),c._isToday(f)?a(this).parent().addClass(h).removeClass("ui-state-default"):a(this).parent().removeClass(h).addClass("ui-state-default"),g&&(b+1)%e.users.length||(f=c._addDays(f,1))}),e.displayFreeBusys&&(f=c._cloneDate(c.element.data("startDate")),c.element.find(".wc-grid-row-freebusy .wc-column-freebusy").each(function(b){a(this).data("startDate",c._cloneDate(f)),a(this).data("endDate",new Date(f.getTime()+d)),g&&(b+1)%e.users.length||(f=c._addDays(f,1))})),this.options.title){var i=this.options.date,j=c._cloneDate(c.element.data("startDate")),k=c._dateLastDayOfWeek(new Date(this._cloneDate(c.element.data("endDate")).getTime()-d)),l=this._getCalendarTitle(),m=e.dateFormat;l=l.replace("%start%",c._formatDate(j,m)),l=l.replace("%end%",c._formatDate(k,m)),l=l.replace("%date%",c._formatDate(i,m)),a(".wc-toolbar .wc-title",c.element).html(l)}},_getCalendarTitle:function(){return a.isFunction(this.options.title)?this.options.title(this.options.daysToShow):this.options.title||""},_renderEvents:function(b,c){var d,e=this,g=this.options,h=0;if(b.options){var i=!1;if(a.each(b.options,function(b,c){c!==g[b]&&(g[b]=c,i=i||a.ui.weekCalendar.updateLayoutOptions[b])}),e._computeOptions(),i){var j=e._getCurrentScrollHour();e.element.empty(),e._renderCalendar(),c=e.element.find(".wc-time-slots .wc-day-column-inner"),e._updateDayColumnHeader(c),e._resizeCalendar(),e._scrollToHour(j,!1)}}this._clearCalendar(),a.isArray(b)?d=e._cleanEvents(b):b.events&&(d=e._cleanEvents(b.events),e._renderFreeBusys(b)),a.each(d,function(a,b){for(var d,f=new Date(b.start),g=new Date(b.end),i=e.options.businessHours.limitDisplay?e.options.businessHours.end:24,j=e.options.businessHours.limitDisplay?e.options.businessHours.start:0,k=new Date(f),l=e._formatDate(k,"Ymd"),m=e._formatDate(g,"Ymd"),n=!1;m>l;)b.start=k,b.end.setFullYear(k.getFullYear()),b.end.setDate(k.getDate()),b.end.setMonth(k.getMonth()),b.end.setHours(i,0,0),(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1),k.setDate(k.getDate()+1),k.setHours(j,0,0),l=e._formatDate(k,"Ymd"),n=!0;g>=k&&(b.start=k,b.end=g,(n&&b.start.getTime()!=b.end.getTime()||!n)&&(d=e._findWeekDayForEvent(b,c))&&(e._renderEvent(b,d),h+=1)),b.start=f}),c.each(function(){e._adjustOverlappingEvents(a(this))}),g.calendarAfterLoad(e.element),f&&clearInterval(f),g.hourLine&&(e._drawCurrentHourLine(),f=setInterval(function(){e._drawCurrentHourLine()},6e4)),!h&&g.noEvents()},_renderEvent:function(b,c){var d=this,e=this.options;if(!(b.start.getTime()>b.end.getTime())){var f,g,h,i;return f=b.id?"wc-cal-event":"wc-cal-event wc-new-cal-event",g='<div class="'+f+' ui-corner-all">',g+='<div class="wc-time ui-corner-top"></div>',g+='<div class="wc-title"></div></div>',c.each(function(){var c=a(g);i=e.eventRender(b,c),c=i?i.appendTo(a(this)):c.appendTo(a(this)),c.css({lineHeight:e.textSize+2+"px",fontSize:e.textSize+"px"}),d._refreshEventDetails(b,c),d._positionEvent(a(this),c),h=h?h.add(c):c}),h.show(),!e.readonly&&e.resizable(b,h)&&d._addResizableToCalEvent(b,h,c),!e.readonly&&e.draggable(b,h)&&d._addDraggableToCalEvent(b,h),e.eventAfterRender(b,h),h}},addEvent:function(){return this._renderEvent.apply(this,arguments)},_adjustOverlappingEvents:function(b){var c=this;if(c.options.allowCalEventOverlap){var d=c._groupOverlappingEventElements(b);a.each(d,function(){var b=this;a.each(b,function(d){var e=this;if(c.options.overlapEventsSeparate)var f=c.options.totalEventsWidthPercentInOneColumn/b.length,g=d*f;else var f=c.options.totalEventsWidthPercentInOneColumn-10*(b.length-1),g=10*d;a.each(e,function(){c.options.overlapEventsSeparate||a(this).bind("mouseover.z-index",function(){var b=a(this);a.each(e,function(){a(this).css({"z-index":"1"})}),b.css({"z-index":"3"})}),a(this).css({width:f+"%",left:g+"%",right:0})})})})}},_groupOverlappingEventElements:function(b){var c,d=b.find(".wc-cal-event:visible"),e=d.sort(function(b,c){return a(b).data("calEvent").start.getTime()-a(c).data("calEvent").start.getTime()}),f=new Date(0,0,0),g=[],h=[];return a.each(e,function(){c=a(this),h.length>0&&f.getTime()<=c.data("calEvent").start.getTime()&&(g.push(h),h=[]);for(var b=0;b<h.length;b++)if(h[b].length>0&&h[b][h[b].length-1].data("calEvent").end.getTime()<=c.data("calEvent").start.getTime())return h[b].push(c),void(f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end));h.push([c]),f.getTime()<c.data("calEvent").end.getTime()&&(f=c.data("calEvent").end)}),h.length>0&&g.push(h),g},_findWeekDayForEvent:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this._getEventUserId(b);return a.isArray(g)||(g=[g]),c.each(function(c,e){a(this).data("startDate").getTime()<=b.start.getTime()&&a(this).data("endDate").getTime()>=b.end.getTime()&&(!f||-1!==a.inArray(a(this).data("wcUserId"),g))&&(d=d?d.add(a(e)):a(e))}),d},_updateEventInCalendar:function(b){var c=this;c._cleanEvent(b),b.id&&c.element.find(".wc-cal-event").each(function(){(a(this).data("calEvent").id===b.id||a(this).hasClass("wc-new-cal-event"))&&a(this).remove()});var d=c._findWeekDayForEvent(b,c.element.find(".wc-grid-row-events .wc-day-column-inner"));d&&d.each(function(d,e){var f=a(e),g=c._renderEvent(b,f);c._adjustForEventCollisions(f,g,b,b),c._refreshEventDetails(b,g),c._positionEvent(f,g),c._adjustOverlappingEvents(f)})},_positionEvent:function(a,b){var c=this.options,d=b.data("calEvent"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=this._getDSTdayShift(d.start).getTime()-this._getDSTdayShift(new Date(d.start.getFullYear(),d.start.getMonth(),d.start.getDate(),f)).getTime(),h=this._getDSTdayShift(d.end).getTime()-this._getDSTdayShift(d.start).getTime(),i=e*g,j=e*h;b.css({top:i,height:j||36e5*e/c.timeslotsPerHour})},_getEventDurationFromPositionedEventElement:function(a,b,c){var d=this.options,e=d.businessHours.limitDisplay?36e5*d.businessHours.start:0,f=new Date(a.data("startDate").getTime()+e+Math.round(c/d.timeslotHeight)*d.millisPerTimeslot),g=new Date(f.getTime()+b.height()/d.timeslotHeight*d.millisPerTimeslot);return{start:this._getDSTdayShift(f,-1),end:this._getDSTdayShift(g,-1)}},_adjustForEventCollisions:function(b,c,d,e,f){var g=this.options;if(!g.allowCalEventOverlap){var h,i,j=this;b.find(".wc-cal-event").not(c).each(function(){var b=a(this).data("calEvent");return d.start.getTime()<b.end.getTime()&&d.end.getTime()>=b.end.getTime()&&(h=b.end),d.end.getTime()>b.start.getTime()&&d.start.getTime()<=b.start.getTime()&&(i=b.start),0==e.resizable||d.end.getTime()<=b.end.getTime()&&d.start.getTime()>=b.start.getTime()?(h=e.start,i=e.end,!1):void 0}),d.start=h||d.start,h&&f?(d.end=new Date(h.getTime()+(e.end.getTime()-e.start.getTime())),j._adjustForEventCollisions(b,c,d,e)):d.end=i||d.end,d.start.getTime()>=d.end.getTime()&&(d.start=e.start,d.end=e.end),c.data("calEvent",d)}},_addDraggableToCalEvent:function(a,b){var c=this.options;b.draggable({handle:".wc-time",containment:"div.wc-time-slots",snap:".wc-day-column-inner",snapMode:"inner",snapTolerance:c.timeslotHeight-1,revert:"invalid",opacity:.5,grid:[b.outerWidth()+1,c.timeslotHeight],start:function(b,d){var e=d.draggable||d.helper;c.eventDrag(a,e)}})},_addDroppableToWeekDay:function(b){var c=this,d=this.options;b.droppable({accept:".wc-cal-event",drop:function(e,f){var g=f.draggable,h=Math.round(parseInt(f.position.top)),i=c._getEventDurationFromPositionedEventElement(b,g,h),j=g.data("calEvent"),k=a.extend(!0,{},j,{start:i.start,end:i.end}),l=d.showAsSeparateUsers&&d.users&&d.users.length;if(l){var m=b.data("wcUserId"),n=c._getEventUserId(j),o=a(f.draggable.parents(".wc-day-column-inner").get(0)).data("wcUserId");if(a.isArray(n)||(n=[n]),-1==a.inArray(m,n)){var p=a.inArray(o,n);n.splice(p,1),-1==a.inArray(m,n)&&n.push(m)}k=c._setEventUserId(k,1==n.length?n[0]:n)}c._adjustForEventCollisions(b,g,k,j,!0);var q=c.element.find(".wc-day-column-inner");d.eventDrop(k,j,g),c._renderEvent(k,c._findWeekDayForEvent(k,q)),g.hide(),g.data("preventClick",!0);var r=c._findWeekDayForEvent(g.data("calEvent"),c.element.find(".wc-time-slots .wc-day-column-inner"));r.data("startDate")!=b.data("startDate")&&c._adjustOverlappingEvents(r),c._adjustOverlappingEvents(b),setTimeout(function(){g.remove()},1e3)}})},_addResizableToCalEvent:function(b,c,d){var e=this,f=this.options;c.resizable({grid:f.timeslotHeight,containment:d,handles:"s",minHeight:f.timeslotHeight,stop:function(c,g){var h=g.element,i=new Date(h.data("calEvent").start.getTime()+Math.max(1,Math.round(g.size.height/f.timeslotHeight))*f.millisPerTimeslot);e._needDSTdayShift(h.data("calEvent").start,i)&&(i=e._getDSTdayShift(i,-1));var j=a.extend(!0,{},b,{start:b.start,end:i});e._adjustForEventCollisions(d,h,j,b),f.eventResize(j,b,h),e._refreshEventDetails(j,h),e._positionEvent(d,h),e._adjustOverlappingEvents(d),h.data("preventClick",!0),setTimeout(function(){h.removeData("preventClick")},500)}}),a(".ui-resizable-handle",c).text("=")},_refreshEventDetails:function(a,b){var c="";!this.options.readonly&&this.options.allowEventDelete&&this.options.deletable(a,b)&&(c='<div class="wc-cal-event-delete ui-icon ui-icon-close"></div>'),b.find(".wc-time").html(this.options.eventHeader(a,this.element)+c),b.find(".wc-title").html(this.options.eventBody(a,this.element)),b.data("calEvent",a),this.options.eventRefresh(a,b)},_clearCalendar:function(){this.element.find(".wc-day-column-inner div").remove(),this._clearFreeBusys()},_scrollToHour:function(a,b){var c=this,d=this.options,e=this.element.find(".wc-scrollable-grid"),f=a;c.options.businessHours.limitDisplay&&(f=a<=c.options.businessHours.start?0:a>=c.options.businessHours.end?c.options.businessHours.end-c.options.businessHours.start-1:a-c.options.businessHours.start);var g=this.element.find(".wc-grid-timeslot-header .wc-hour-header:eq("+f+")");e.animate({scrollTop:0},0,function(){var a=g.offset().top,c=a-e.offset().top-g.outerHeight();b?e.animate({scrollTop:c},d.scrollToHourMillis):e.animate({scrollTop:c},0)})},_hourForIndex:function(a){return 0===a?12:13>a?a:a-12},_24HourForIndex:function(a){return 0===a?"00:00":10>a?"0"+a+":00":a+":00"},_amOrPm:function(a){return 12>a?"AM":"PM"},_isToday:function(a){var b=this._cloneDate(a);this._clearTime(b);var c=new Date;return this._clearTime(c),c.getTime()===b.getTime()},_cleanEvents:function(b){var c=this;return a.each(b,function(a,b){c._cleanEvent(b)}),b},_cleanEvent:function(a){a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a.end||(a.end=this._addDays(this._cloneDate(a.start),1))},_disableTextSelect:function(b){b.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})},_dateFirstDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c);return d.setDate(d.getDate()-b._getAdjustedDayIndex(c)),d},_dateLastDayOfWeek:function(a){var b=this,c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(c),e=b.options.daysToShow-1-b._getAdjustedDayIndex(c);return d.setDate(d.getDate()+e),d},_fixMinMaxDate:function(a){var b,c;if(a=this._cleanDate(a),this.options.minDate&&(b=this._cleanDate(this.options.minDate),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a.getTime()<b.getTime()&&this._trigger("reachedmindate",this.element,a),a=this._cleanDate(Math.max(a.getTime(),b.getTime()))),this.options.maxDate){if(c=this._cleanDate(this.options.maxDate),!this._startOnFirstDayOfWeek()){var d=c.getDate()-this.options.daysToShow+1;c=new Date(c.getFullYear(),c.getMonth(),d)}c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999),a.getTime()>c.getTime()&&this._trigger("reachedmaxdate",this.element,a),a=this._cleanDate(Math.min(a.getTime(),c.getTime()))}return a},_getAdjustedDayIndex:function(a){if(!this._startOnFirstDayOfWeek())return 0;var b=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=b.getDay(),d=[0,1,2,3,4,5,6];return this._rotate(d,this._firstDayOfWeek()),d[c]},_firstDayOfWeek:function(){return a.isFunction(this.options.firstDayOfWeek)?this.options.firstDayOfWeek(this.element):this.options.firstDayOfWeek},_dateLastMilliOfWeek:function(a){var b=this._dateLastDayOfWeek(a);return b=this._cloneDate(b),b.setDate(b.getDate()+1),b},_clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},_addDays:function(a,b,c){return a.setDate(a.getDate()+b),c?a:this._clearTime(a)},_rotate:function(a,b){for(var c,d,e=a.length,b=(Math.abs(b)>=e&&(b%=e),0>b&&(b+=e),b);b;b=(Math.ceil(e/b)-1)*b-e+(e=b))for(c=e;c>b;d=a[--c],a[c]=a[c-b],a[c-b]=d);return a},_cloneDate:function(a){return new Date(a.getTime())},_cleanDate:function(a){return"string"==typeof a?isNaN(Number(a))?Date.parse(a)||new Date(a):this._cleanDate(parseInt(a,10)):"number"==typeof a?new Date(a):a},_formatDate:function(a,b){for(var c="",d=0;d<b.length;d++){var e=b.charAt(d);0!=d&&"\\"==b.charAt(d-1)?c+=e:this._replaceChars[e]?c+=this._replaceChars[e](a,this):"\\"!=e&&(c+=e)}return c},_replaceChars:{d:function(a){return(a.getDate()<10?"0":"")+a.getDate()},D:function(a,b){return b.options.shortDays[a.getDay()]},j:function(a){return a.getDate()},l:function(a,b){return b.options.longDays[a.getDay()]},N:function(a){var b=a.getDay();return b?b:7},S:function(a){return a.getDate()%10==1&&11!=a.getDate()?"st":a.getDate()%10==2&&12!=a.getDate()?"nd":a.getDate()%10==3&&13!=a.getDate()?"rd":"th"},w:function(a){return a.getDay()},z:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil((a-b)/864e5)},W:function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},F:function(a,b){return b.options.longMonths[a.getMonth()]},m:function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},M:function(a,b){return b.options.shortMonths[a.getMonth()]},n:function(a){return a.getMonth()+1},t:function(a){var b=a;return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},L:function(a){var b=a.getFullYear();return b%400==0||b%100!=0&&b%4==0},o:function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},Y:function(a){return a.getFullYear()},y:function(a){return(""+a.getFullYear()).substr(2)},a:function(a){return a.getHours()<12?"am":"pm"},A:function(a){return a.getHours()<12?"AM":"PM"},B:function(a){return Math.floor(1e3*((a.getUTCHours()+1)%24+a.getUTCMinutes()/60+a.getUTCSeconds()/3600)/24)},g:function(a){return a.getHours()%12||12},G:function(a){return a.getHours()},h:function(a){return((a.getHours()%12||12)<10?"0":"")+(a.getHours()%12||12)},H:function(a){return(a.getHours()<10?"0":"")+a.getHours()},i:function(a){return(a.getMinutes()<10?"0":"")+a.getMinutes()},s:function(a){return(a.getSeconds()<10?"0":"")+a.getSeconds()},u:function(a){var b=a.getMilliseconds();return(10>b?"00":100>b?"0":"")+b},e:function(){return"Not Yet Supported"},I:function(){return"Not Yet Supported"},O:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+"00"},P:function(a){return(-a.getTimezoneOffset()<0?"-":"+")+(Math.abs(a.getTimezoneOffset()/60)<10?"0":"")+Math.abs(a.getTimezoneOffset()/60)+":00"},T:function(a){var b=a.getMonth();a.setMonth(0);var c=a.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return a.setMonth(b),c},Z:function(a){return 60*-a.getTimezoneOffset()},c:function(a,b){return b._formatDate(a,"Y-m-d\\TH:i:sP")},r:function(a,b){return b._formatDate(a,"D, d M Y H:i:s O")},U:function(a){return a.getTime()/1e3}},getUserForId:function(b){return a.extend({},this.options.users[this._getUserIndexFromId(b)])},_getUserName:function(b){var c=this,d=this.options,e=d.users[b];return a.isFunction(d.getUserName)?d.getUserName(e,b,c.element):e},_getUserIdFromIndex:function(b){var c=this,d=this.options;return a.isFunction(d.getUserId)?d.getUserId(d.users[b],b,c.element):b},_getUserIndexFromId:function(a){for(var b=this,c=this.options,d=0;d<c.users.length;d++)if(b._getUserIdFromIndex(d)==a)return d;return 0},_getEventUserId:function(b){var c=this,d=this.options;return d.showAsSeparateUsers&&d.users&&d.users.length?a.isFunction(d.getEventUserId)?d.getEventUserId(b,c.element):b.userId:[]},_setEventUserId:function(b,c){var d=this,e=this.options;return a.isFunction(e.setEventUserId)?e.setEventUserId(c,b,d.element):(b.userId=c,b)},_getFreeBusyUserId:function(b){var c=this,d=this.options;return a.isFunction(d.getFreeBusyUserId)?d.getFreeBusyUserId(b.getOption(),c.element):b.getOption("userId")},_clearFreeBusys:function(){if(this.options.displayFreeBusys){var b=this,c=this.options,d=b.element.find(".wc-grid-row-freebusy .wc-column-freebusy");d.each(function(){a(this).data("wcFreeBusyManager",new h({start:b._cloneDate(a(this).data("startDate")),end:b._cloneDate(a(this).data("endDate")),defaultFreeBusy:c.defaultFreeBusy||{}}))}),b.element.find(".wc-grid-row-freebusy .wc-freebusy").remove()}},_findWeekDaysForFreeBusy:function(b,c){var d,e=this.options,f=e.showAsSeparateUsers&&e.users&&e.users.length,g=this,h=g._getFreeBusyUserId(b);return a.isArray(h)||(h="undefined"!=h?[h]:[]),c||(c=g.element.find(".wc-grid-row-freebusy .wc-column-freebusy")),c.each(function(){var c=a(this).data("wcFreeBusyManager"),e=c.isWithin(b.getStart())||c.isWithin(b.getEnd())||b.isWithin(c.getStart())||b.isWithin(c.getEnd()),g=a(this).data("wcUserId");!e||f&&-1==a.inArray(g,h)||(d=d?d.add(a(this)):a(this))}),d},_renderFreeBusys:function(b){if(this.options.displayFreeBusys){var c,d=this,e=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy");c=a.isArray(b)?d._cleanFreeBusys(b):b.freebusys?d._cleanFreeBusys(b.freebusys):[],a.each(c,function(b,c){var f=d._findWeekDaysForFreeBusy(c,e);f&&f.each(function(){var b=a(this).data("wcFreeBusyManager");b.insertFreeBusy(new g(c.getOption())),a(this).data("wcFreeBusyManager",b)})}),d._refreshFreeBusys(e)}},_refreshFreeBusys:function(b){if(this.options.displayFreeBusys&&b){var c=this,d=this.options,e=d.businessHours.limitDisplay?d.businessHours.start:0,f=d.businessHours.limitDisplay?d.businessHours.end:24;b.each(function(){var b=a(this),d=c._cloneDate(b.data("startDate")),g=c._cloneDate(d);d.setHours(e),g.setHours(f),b.find(".wc-freebusy").remove(),a.each(b.data("wcFreeBusyManager").getFreeBusys(d,g),function(){c._renderFreeBusy(this,b)})})}},_renderFreeBusy:function(b,c){if(this.options.displayFreeBusys){var d=this,e=this.options,f='<div class="wc-freebusy"></div>',h=a(f);h.data("wcFreeBusy",new g(b.getOption())),this._positionFreeBusy(c,h),h=e.freeBusyRender(b.getOption(),h,d.element),h&&h.appendTo(c)}},_positionFreeBusy:function(a,b){var c=this.options,d=b.data("wcFreeBusy"),e=a.height()/c.millisToDisplay,f=c.businessHours.limitDisplay?c.businessHours.start:0,g=d.getStart().getTime()-new Date(d.getStart().getFullYear(),d.getStart().getMonth(),d.getStart().getDate(),f).getTime(),h=d.getEnd().getTime()-d.getStart().getTime(),i=e*g,j=e*h;b.css({top:i,height:j})},_cleanFreeBusys:function(b){var c=this,d=[];if(!a.isArray(b))var b=[b];return a.each(b,function(a,b){d.push(new g(c._cleanFreeBusy(b)))}),d},_cleanFreeBusy:function(a){return a.date&&(a.start=a.date),a.start=this._cleanDate(a.start),a.end=this._cleanDate(a.end),a},getFreeBusyManagersFor:function(a,b){var c={start:a,end:a};return this._setEventUserId(c,b),this.getFreeBusyManagerForEvent(c)},getFreeBusyManagerForEvent:function(b){var c,d=this,e=this.options;if(e.displayFreeBusys){var f=d.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),h=new g({start:b.start,end:b.end}),i=e.showAsSeparateUsers&&e.users&&e.users.length,j=i?d._getEventUserId(b):null;a.isArray(j)||(j=[j]),f.each(function(){var b=a(this).data("wcFreeBusyManager"),d=b.isWithin(h.getEnd())||b.isWithin(h.getEnd())||h.isWithin(b.getStart())||h.isWithin(b.getEnd());return!d||i&&-1==a.inArray(a(this).data("wcUserId"),j)?void 0:(c=a(this).data("wcFreeBusyManager"),!1)})}return c},updateFreeBusy:function(b){var c=this,d=this.options;if(d.displayFreeBusys){var e,f=c.element.find(".wc-grid-row-freebusy .wc-column-freebusy"),g=c._cleanFreeBusys(b);a.each(g,function(b,d){var g=c._findWeekDaysForFreeBusy(d,f);g&&g.length&&(g.each(function(b,c){var e=a(c).data("wcFreeBusyManager");e.insertFreeBusy(d),a(c).data("wcFreeBusyManager",e)}),e=e?e.add(g):g)}),c._refreshFreeBusys(e)}},_startOnFirstDayOfWeek:function(){return jQuery.isFunction(this.options.startOnFirstDayOfWeek)?this.options.startOnFirstDayOfWeek(this.element):this.options.startOnFirstDayOfWeek},_getCurrentScrollHour:function(){var a=this,b=this.options,c=this.element.find(".wc-scrollable-grid"),d=c.scrollTop();return a.options.businessHours.limitDisplay&&(d+=b.businessHours.start*b.timeslotHeight*b.timeslotsPerHour),Math.round(d/(b.timeslotHeight*b.timeslotsPerHour))+1},_getJsonOptions:function(){return a.isFunction(this.options.jsonOptions)?a.extend({},this.options.jsonOptions(this.element)):a.isPlainObject(this.options.jsonOptions)?a.extend({},this.options.jsonOptions):{}},_getHeaderDate:function(b){var c=this.options;if(c.getHeaderDate&&a.isFunction(c.getHeaderDate))return c.getHeaderDate(b,this.element);var d=c.useShortDayNames?c.shortDays[b.getDay()]:c.longDays[b.getDay()];return d+c.headerSeparator+this._formatDate(b,c.dateFormat)},_getDSTdayShift:function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0),d=c.getTimezoneOffset(),e=a.getTimezoneOffset();return d==e?a:(b=b?b:1,new Date(a.getTime()-b*(d>e?-1:1)*(Math.max(d,e)-Math.min(d,e))*6e4))},_needDSTdayShift:function(a,b){return a.getTimezoneOffset()!=b.getTimezoneOffset()}}}()),a.extend(a.ui.weekCalendar,{version:"2.0-dev",updateLayoutOptions:{startOnFirstDayOfWeek:!0,firstDayOfWeek:!0,daysToShow:!0,displayOddEven:!0,timeFormat:!0,dateFormat:!0,use24Hour:!0,useShortDayNames:!0,businessHours:!0,timeslotHeight:!0,timeslotsPerHour:!0,buttonText:!0,height:!0,shortMonths:!0,longMonths:!0,shortDays:!0,longDays:!0,textSize:!0,users:!0,showAsSeparateUsers:!0,displayFreeBusys:!0}});var d=864e5,e=7*d,f={getStart:function(){return this.getOption("start")},getEnd:function(){return this.getOption("end")},getOption:function(){return arguments.length?"undefined"!=typeof this.options[arguments[0]]?this.options[arguments[0]]:"undefined"!=typeof arguments[1]?arguments[1]:null:this.options},setOption:function(b,c){return 1==arguments.length?(a.extend(this.options,arguments[0]),this):(this.options[b]=c,this)},isWithin:function(a){return Math.floor(a.getTime()/1e3)>=Math.floor(this.getStart().getTime()/1e3)&&Math.floor(a.getTime()/1e3)<=Math.floor(this.getEnd().getTime()/1e3)},isValid:function(){return this.getStart().getTime()<this.getEnd().getTime()}},g=function(b){this.options=a.extend({},b||{})};a.extend(g.prototype,f);var h=function(b){this.options=a.extend({defaultFreeBusy:{}},b||{}),this.freeBusys=[],this.freeBusys.push(new g(a.extend({start:this.getStart(),end:this.getEnd()},this.options.defaultFreeBusy)))};a.extend(h.prototype,f,{getFreeBusys:function(){switch(arguments.length){case 0:return this.freeBusys;case 1:var b=[],c=arguments[0];return this.isWithin(c)?(a.each(this.freeBusys,function(){return this.isWithin(c)&&b.push(this),Math.floor(this.getEnd().getTime()/1e3)>Math.floor(c.getTime()/1e3)?!1:void 0}),b):b;default:var b=[],c=arguments[0],d=arguments[1],e=new g({start:c,end:d});return d.getTime()<c.getTime()||this.getStart().getTime()>d.getTime()||this.getEnd().getTime()<c.getTime()?b:(a.each(this.freeBusys,function(){if(this.getStart().getTime()>=d.getTime())return!1;if(e.isWithin(this.getStart())&&e.isWithin(this.getEnd()))b.push(this);else if(this.isWithin(e.getStart())&&this.isWithin(e.getEnd())){var a=new g(this.getOption());a.setOption("end",e.getEnd()),a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getStart())&&this.getStart().getTime()<c.getTime()){var a=new g(this.getOption());a.setOption("start",e.getStart()),b.push(a)}else if(this.isWithin(e.getEnd())&&this.getEnd().getTime()>d.getTime()){var a=new g(this.getOption());a.setOption("end",e.getEnd()),b.push(a)}}),b)}},insertFreeBusy:function(b){var b=new g(b.getOption());b.getStart().getTime()<this.getStart().getTime()&&b.setOption("start",this.getStart()),b.getEnd().getTime()>this.getEnd().getTime()&&b.setOption("end",this.getEnd());var c=b.getStart(),d=b.getEnd(),e=0,f=this.freeBusys.length-1,h=[],i=function(a){a.isValid()&&h.push(a)};a.each(this.freeBusys,function(a){var h=this;if(h.isWithin(c)&&h.isWithin(d)){if(e=a,f=a,c.getTime()==h.getStart().getTime()&&d.getTime()==h.getEnd().getTime()){var j=new g(b.getOption());i(j)}else if(c.getTime()==h.getStart().getTime()){var j=new g(b.getOption()),k=new g(h.getOption());k.setOption("start",d),i(j),i(k)}else if(d.getTime()==h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("end",c);var k=new g(b.getOption());i(j),i(k)}else{var j=new g(h.getOption()),k=new g(b.getOption()),l=new g(h.getOption());j.setOption("end",c),l.setOption("start",d),i(j),i(k),i(l)}return!1}if(h.isWithin(c)&&h.getEnd().getTime()!=c.getTime()){if(h.getStart().getTime()!=c.getTime()){var j=new g(h.getOption());j.setOption("end",c),i(j)}e=a}else if(h.isWithin(d)&&h.getStart().getTime()!=d.getTime()){if(i(new g(b.getOption())),d.getTime()<h.getEnd().getTime()){var j=new g(h.getOption());j.setOption("start",d),i(j)}return f=a,!1}});var j=this.freeBusys;return this.freeBusys=[],e&&(this.freeBusys=this.freeBusys.concat(j.slice(0,e))),this.freeBusys=this.freeBusys.concat(h),f<j.length&&(this.freeBusys=this.freeBusys.concat(j.slice(f+1))),this}})}(jQuery),jQuery(document).ready(function(a){function b(b){var c={options:{timeslotHeight:80},events:b.appointments,freebusys:b.availibility,userNames:b.doctors};a("#calendar").weekCalendar({timeslotsPerHour:2,scrollToHourMillis:0,height:function(){return 500-a("h1").outerHeight(!0)
},eventRender:function(a,b){a.end.getTime()<(new Date).getTime()&&b.css("backgroundColor","#22b73a")},eventNew:function(b,c,d,e){var f=!0;return a.each(d.getFreeBusys(b.start,b.end),function(){return this.getStart().getTime()==b.end.getTime()||this.getEnd().getTime()==b.start.getTime()||this.getOption("free")?void 0:(f=!1,!1)}),f?(b.id-b.userId+"_"+b.start.getTime(),void a(e).weekCalendar("updateFreeBusy",{userId:b.userId,start:b.start,end:b.end,free:!1})):(a(e).weekCalendar("removeEvent",b.id),!1)},data:function(a,b,d){d(c)},businessHours:{start:9,end:18,limitDisplay:!1},users:c.userNames,showAsSeperateUser:!0,displayOddEven:!1,displayFreeBusy:!0,daysToShow:4,headerSeperator:"</br> ",useShortDayNames:!0,dateFormat:"d F y",hourLine:!0})}!function(a){var c=new Date;c.setDate(c.getDate()-c.getDay());var d=c.getFullYear(),e=c.getMonth(),f=c.getDate();console.log(c),console.log(new Date(d,e,f,12)),a.ajax({url:"https://yerbaverde.local/BookSchedule",type:"GET",datatype:"json",success:function(a){b(a)},error:function(b){console.log("Error : "+b),a(".ErrorMsg").html('<p class="warning"> It appears there is an error with retrieving the scheduling calendar, please try again later...</p>')}})}(jQuery)});
//# sourceMappingURL=greensched.min.js.map